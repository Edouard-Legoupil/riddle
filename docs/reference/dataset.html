<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Work with RIDL datasets (datasets)"><title>Work with RIDL datasets (datasets) — dataset • riddle</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Lato-0.4.4/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.4/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Work with RIDL datasets (datasets) — dataset"><meta property="og:description" content="Work with RIDL datasets (datasets)"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">riddle</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/package-functions.html">Package Functions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/edouard-legoupil/riddle/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Work with RIDL datasets (datasets)</h1>
      <small class="dont-index">Source: <a href="https://github.com/edouard-legoupil/riddle/blob/HEAD/R/dataset.R" class="external-link"><code>R/dataset.R</code></a></small>
      <div class="d-none name"><code>dataset.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Work with RIDL datasets (datasets)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dataset_create</span><span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dataset_show</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dataset_update</span><span class="op">(</span><span class="va">id</span>, <span class="va">metadata</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dataset_patch</span><span class="op">(</span><span class="va">id</span>, <span class="va">metadata</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dataset_delete</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>metadata</dt>
<dd><p>Metadata created by <code><a href="dataset_metadata.html">dataset_metadata()</a></code>.</p></dd>


<dt>id</dt>
<dd><p>The id or name of the dataset.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The dataset.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>You must have the necessary permissions to create, edit, or delete datasets.</p>
<p>Note that several fields are required for <code>dataset_create()</code> and <code>dataset_update()</code> operations to succeed.
Consult <code><a href="dataset_metadata.html">dataset_metadata()</a></code> for the details.</p>
<p>For <code>dataset_update()</code>/<code>dataset_patch()</code> operations, it is recommended to
call <code>dataset_show()</code>, make the desired changes to the result,
and then call <code>dataset_update()</code>/<code>dataset_patch()</code> with it.</p>
<p>The difference between the update and patch methods is that the patch will
perform an update of the provided parameters, while leaving all other
parameters unchanged, whereas the update methods deletes all parameters
not explicitly provided in the <code>metadata</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#-----</span></span></span>
<span class="r-in"><span><span class="co"># test search in prod</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.unsetenv</a></span><span class="op">(</span><span class="st">"USE_UAT"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">riddle</span><span class="fu">::</span><span class="fu">dataset_show</span><span class="op">(</span><span class="st">"unhcr-cbi-americas-quarterly-report"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> FalseNULLNULL74143486-95d1-44bb-a1e8-b168a9b36a22cawiUnited Nations High Commissioner for Refugeesyes2022-02-142021-04-07not_availableRegionalUNSPECIFIEDd6da9482-9062-46c7-a3ef-c47bf71937ccpersonally_identifiableFALSE27a3YPSk4nL6ARa4xGLAhhyuNULLNULLNULLNULL2022-02-16T21:36:45.6817262022-02-16T21:37:52.927952unhcr-cbi-americas-quarterly-reportDataset imported from KoBoToolbox</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> KoBoToolbox owner: cbi_americas</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sector: Ayuda Humanitaria - Coordinación / Gestión de la Información</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Country: Panama (PAN)40programme_monitoringlist(id = "a402d93c-edc4-4885-95a3-7463c433f50a", name = "americas-regional-dataset", title = "Americas : Regional Datasets", type = "data-container", description = "", image_url = "", created = "2020-06-11T16:46:16.394107", is_organization = TRUE, approval_status = "approved", state = "active")a3YPSk4nL6ARa4xGLAhhyua402d93c-edc4-4885-95a3-7463c433f50aFALSErawlist()activeUNHCR CBI Americas: Quarterly ReportdatasetcountryNULLrestrictedlist(cache_last_updated = c(NA, NA, NA, NA), cache_url = c(NA, NA, NA, NA), created = c("2022-02-16T21:36:46.648492", "2022-02-16T21:36:48.150908", "2022-02-16T21:36:49.537820", "2022-02-16T21:36:51.007008"), datastore_active = c(FALSE, FALSE, FALSE, FALSE), description = c("Questionnaire imported from the KoBo survey", "JSON data imported from the KoBoToolbox survey. ", "CSV data imported from the KoBoToolbox survey. ", "XLS data imported from the KoBoToolbox survey. "), file_type = c("questionnaire", </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> "microdata", "microdata", "microdata"), format = c("XLS", "JSON", "CSV", "XLS"), hash = c("", "", "", ""), id = c("6ec5d932-fd5b-41c2-aa7c-7f86096abf86", "44ac8836-dacd-46c0-8a46-97f778522b2b", "0d5e31d4-c052-442e-82a2-13707571a2e2", "d5d9c8e2-4a5b-4c08-a851-3409c4b88c3b"), kobo_details = list(kobo_asset_id = c("a3YPSk4nL6ARa4xGLAhhyu", "a3YPSk4nL6ARa4xGLAhhyu", "a3YPSk4nL6ARa4xGLAhhyu", "a3YPSk4nL6ARa4xGLAhhyu"), kobo_download_status = c("complete", "complete", "complete", "complete"), kobo_download_attempts = c(1, </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 1, 1, 1), kobo_last_updated = c("2022-02-16T21:36:59.955251", "2022-02-16T21:37:13.109264", "2022-02-16T21:37:25.613627", "2022-02-16T21:37:43.018402"), kobo_export_id = c(NA, NA, "e4xaPtuZLFu56nabdmawxn", "eumdDkexmhJgY7VJUYcXcw"), kobo_submission_count = c(NA, 94, 94, 94)), kobo_type = c("questionnaire", "data", "data", "data"), last_modified = c("2022-02-16T21:37:02.522322", "2022-02-16T21:37:14.549043", "2022-02-16T21:37:27.141097", "2022-02-16T21:37:45.654386"), metadata_modified = c("2022-02-16T21:37:02.843844", </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> "2022-02-16T21:37:14.845454", "2022-02-16T21:37:27.447127", "2022-02-16T21:37:46.406802"), mimetype = c("application/x-empty", "application/x-empty", "application/x-empty", "application/x-empty"), mimetype_inner = c(NA, NA, NA, NA), name = c("Questionnaire XLS", "Survey json data", "Survey csv data", "Survey xls data"), package_id = c("d6da9482-9062-46c7-a3ef-c47bf71937cc", "d6da9482-9062-46c7-a3ef-c47bf71937cc", "d6da9482-9062-46c7-a3ef-c47bf71937cc", "d6da9482-9062-46c7-a3ef-c47bf71937cc"), position = 0:3, </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     resource_type = c(NA, NA, NA, NA), size = c(0, 0, 0, 0), state = c("active", "active", "active", "active"), type = c("attachment", "data", "data", "data"), url = c("https://ridl.unhcr.org/dataset/d6da9482-9062-46c7-a3ef-c47bf71937cc/resource/6ec5d932-fd5b-41c2-aa7c-7f86096abf86/download/a3ypsk4nl6ara4xglahhyu.xls", "https://ridl.unhcr.org/dataset/d6da9482-9062-46c7-a3ef-c47bf71937cc/resource/44ac8836-dacd-46c0-8a46-97f778522b2b/download/a3ypsk4nl6ara4xglahhyu_data.json", "https://ridl.unhcr.org/dataset/d6da9482-9062-46c7-a3ef-c47bf71937cc/resource/0d5e31d4-c052-442e-82a2-13707571a2e2/download/a3ypsk4nl6ara4xglahhyu_data.csv", </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     "https://ridl.unhcr.org/dataset/d6da9482-9062-46c7-a3ef-c47bf71937cc/resource/d5d9c8e2-4a5b-4c08-a851-3409c4b88c3b/download/a3ypsk4nl6ara4xglahhyu_data.xls"), url_type = c("upload", "upload", "upload", "upload"), visibility = c("public", "restricted", "restricted", "restricted"), date_range_end = c(NA, "2022-02-14", "2022-02-14", "2022-02-14"), date_range_start = c(NA, "2021-04-07", "2021-04-07", "2021-04-07"), identifiability = c(NA, "personally_identifiable", "personally_identifiable", "personally_identifiable"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     ), process_status = c(NA, "raw", "raw", "raw"), version = c(NA, "1", "1", "1"))list()list()list()list()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 54</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   admin…¹ archi…² author autho…³ clean…⁴ creat…⁵ data_…⁶ data_…⁷ data_…⁸ data_…⁹</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> <span style="color: #949494;">""</span>      False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">""</span>      741434… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>      cawi    United…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 44 more variables: data_sensitivity &lt;chr&gt;, date_range_end &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   date_range_start &lt;chr&gt;, external_access_level &lt;chr&gt;, geog_coverage &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   geographies &lt;chr&gt;, id &lt;chr&gt;, identifiability &lt;chr&gt;, isopen &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   keywords &lt;chr&gt;, kobo_asset_id &lt;chr&gt;, license_id &lt;lgl&gt;, license_title &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   maintainer &lt;lgl&gt;, maintainer_email &lt;lgl&gt;, metadata_created &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   metadata_modified &lt;chr&gt;, name &lt;chr&gt;, notes &lt;chr&gt;, num_resources &lt;int&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   num_tags &lt;int&gt;, operational_purpose_of_data &lt;chr&gt;, organization &lt;list&gt;, …</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">riddle</span><span class="fu">::</span><span class="fu">dataset_show</span><span class="op">(</span><span class="st">'rms_v4'</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The RMS survey was integrated with the HFS Protection Monitoring module to streamline collection. Therefore, some changes were made to the original RMS form.FalseNULLNULL5cdbcb1d-4cdb-48e6-9c4d-2f3a50d2c9c0triUnited Nations High Commissioner for Refugeesyes2022-07-302022-07-11not_availableGTM8c7eb4c1-b40e-4fc5-abae-896655f64cb2personally_identifiableFALSEc("3", "5", "15", "62")aQTbMZSPH4vwMJTtk4xjHTNULLNULLNULLNULL2022-08-31T22:49:50.6941752022-12-08T15:55:38.364640rms_v4RMS: Survey to collect data for core impact and core outcome indicators in a standardized way.  Protection Monitoring: collection of information for the analysis of profiles with protection needs.  Interviews conducted by phone by a specialized UNHCR provider.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Observations: 3981.  Latest submission: July 25, 2022.53protection_monitoringlist(id = "99f73637-5da9-4199-bade-1fab89343438", name = "guatemala", title = "Guatemala", type = "data-container", description = "", image_url = "", created = "2018-07-12T21:00:37.554859", is_organization = TRUE, approval_status = "approved", state = "active")aQTbMZSPH4vwMJTtk4xjHT99f73637-5da9-4199-bade-1fab89343438FALSErawnonprobability_availabilityResults Monitoring Survey (RMS) and Protection MonitoringactiveResults Monitoring Survey (RMS) and Protection MonitoringdatasetindividualNULLrestrictedlist(cache_last_updated = c(NA, NA, NA, NA, NA), cache_url = c(NA, NA, NA, NA, NA), created = c("2022-08-31T22:49:51.777678", "2022-08-31T22:49:55.450262", "2022-08-31T22:49:57.089230", "2022-10-03T14:32:11.734505", "2022-10-04T13:59:30.533323"), datastore_active = c(FALSE, FALSE, FALSE, FALSE, FALSE), description = c("Questionnaire imported from the KoBo survey", "CSV data imported from the KoBoToolbox survey. ", "XLS data imported from the KoBoToolbox survey. ", "Data from Kobo in XML format with values and headers.  3 October 2022.", </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ""), file_type = c("questionnaire", "microdata", "microdata", "microdata", "report"), format = c("XLS", "CSV", "XLS", "XLSX", "HTML"), hash = c("", "", "", "", ""), id = c("2c6a805f-77d4-4b3d-9873-5480d9943472", "491c3718-a4e6-40c8-8289-90199e5457cb", "92ae1611-149c-4e4a-b83a-eaeb25942309", "21b3ce9f-5653-4819-a6ac-df19283691d1", "29d4bdba-b599-4e9e-8f17-eadbe6fadcc1"), kobo_details = list(kobo_asset_id = c("aQTbMZSPH4vwMJTtk4xjHT", "aQTbMZSPH4vwMJTtk4xjHT", "aQTbMZSPH4vwMJTtk4xjHT", NA, NA), kobo_download_status = c("complete", </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> "complete", "error", NA, NA), kobo_download_attempts = c(1, 1, 5, NA, NA), kobo_last_updated = c("2022-08-31T22:50:04.948178", "2022-08-31T22:50:18.546376", "2022-12-08T15:55:37.770805", NA, NA), kobo_export_id = c(NA, "eBoP9fbADL6mBY4JCsdxui", "eJFS5SeMNLYVQKxvnEKwBQ", NA, NA), kobo_filter_fields_from_all_versions = c(NA, TRUE, TRUE, NA, NA), kobo_filter_group_sep = c(NA, "/", "/", NA, NA), kobo_filter_fields = list(NULL, list(), list(), NULL, NULL), kobo_filter_query = c(NA, NA, NA, NA, NA), kobo_filter_multiple_select = c(NA, </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> "both", "both", NA, NA), kobo_filter_hierarchy_in_labels = c(NA, TRUE, TRUE, NA, NA), kobo_filter_language = c(NA, "_default", "_default", NA, NA), kobo_last_error_response = c(NA, NA, "Failed to download KoboToolbox data resource 92ae1611-149c-4e4a-b83a-eaeb25942309. Last export status from Kobo: {'url': 'https://kobo.unhcr.org/api/v2/assets/aQTbMZSPH4vwMJTtk4xjHT/exports/eJFS5SeMNLYVQKxvnEKwBQ/?format=json', 'status': 'processing', 'messages': {}, 'uid': 'eJFS5SeMNLYVQKxvnEKwBQ', 'date_created': '2022-12-08T15:47:56.455119Z', 'last_submission_time': None, 'result': None, 'data': {'lang': '_default', 'name': None, 'type': 'xls', 'source': 'https://kobo.unhcr.org/api/v2/assets/aQTbMZSPH4vwMJTtk4xjHT/?format=json', 'flatten': True, 'group_sep': '/', 'multiple_select': 'both', 'hierarchy_in_labels': True, 'fields_from_all_versions': True}}", </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> NA, NA)), kobo_type = c("questionnaire", "data", "data", "", ""), last_modified = c("2022-08-31T22:50:07.684601", "2022-08-31T22:50:20.090377", "2022-08-31T22:50:33.070115", "2022-10-03T14:32:11.536587", "2022-10-04T13:59:30.321887"), metadata_modified = c("2022-08-31T22:50:08.260981", "2022-08-31T22:50:20.447250", "2022-12-08T15:55:38.370890", "2022-10-03T14:32:18.063693", "2022-10-04T13:59:36.012003"), mimetype = c("application/x-empty", "application/x-empty", "application/x-empty", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> "text/html"), mimetype_inner = c(NA, NA, NA, NA, NA), name = c("Questionnaire XLS", "Survey csv data", "Survey xls data", "RMS XML values and headers", "Crunching report"), package_id = c("8c7eb4c1-b40e-4fc5-abae-896655f64cb2", "8c7eb4c1-b40e-4fc5-abae-896655f64cb2", "8c7eb4c1-b40e-4fc5-abae-896655f64cb2", "8c7eb4c1-b40e-4fc5-abae-896655f64cb2", "8c7eb4c1-b40e-4fc5-abae-896655f64cb2"), position = 0:4, resource_type = c(NA, NA, NA, NA, NA), size = c(0, 0, 0, 1967301, 56601325), state = c("active", </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> "active", "active", "active", "active"), type = c("attachment", "data", "data", "data", "attachment"), url = c("https://ridl.unhcr.org/dataset/8c7eb4c1-b40e-4fc5-abae-896655f64cb2/resource/2c6a805f-77d4-4b3d-9873-5480d9943472/download/aqtbmzsph4vwmjttk4xjht.xls", "https://ridl.unhcr.org/dataset/8c7eb4c1-b40e-4fc5-abae-896655f64cb2/resource/491c3718-a4e6-40c8-8289-90199e5457cb/download/survey-csv-data__aqtbmzsph4vwmjttk4xjht_data.csv", "https://ridl.unhcr.org/dataset/8c7eb4c1-b40e-4fc5-abae-896655f64cb2/resource/92ae1611-149c-4e4a-b83a-eaeb25942309/download/survey-xls-data__aqtbmzsph4vwmjttk4xjht_data.xls", </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> "https://ridl.unhcr.org/dataset/8c7eb4c1-b40e-4fc5-abae-896655f64cb2/resource/21b3ce9f-5653-4819-a6ac-df19283691d1/download/rms_v4_xml_values_and_headers.xlsx", "https://ridl.unhcr.org/dataset/8c7eb4c1-b40e-4fc5-abae-896655f64cb2/resource/29d4bdba-b599-4e9e-8f17-eadbe6fadcc1/download/exploration.html"), url_type = c("upload", "upload", "upload", "upload", "upload"), visibility = c("public", "restricted", "restricted", "restricted", "public"), date_range_end = c(NA, "2022-07-30", "2022-07-30", "2022-07-30", </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> NA), date_range_start = c(NA, "2022-07-11", "2022-07-11", "2022-07-11", NA), identifiability = c(NA, "personally_identifiable", "personally_identifiable", "personally_identifiable", NA), process_status = c(NA, "raw", "raw", "raw", NA), version = c(NA, "1", "1", "1", NA), original_url = c(NA, NA, NA, "", ""))list(display_name = c("Monitoring", "RMS", "protection"), id = c("c58abf44-15dd-442b-a712-a814c8a04c1c", "2f0595e3-3ac5-4c85-8deb-e931cf390a40", "58aa88bd-f6b9-49cc-843b-b2c6d6b8f1c2"), name = c("Monitoring", "RMS", "protection"), state = c("active", "active", "active"), vocabulary_id = c(NA, NA, NA))list()list()list()</span>
<span class="r-in"><span><span class="va">list_of_ressources</span> <span class="op">&lt;-</span> <span class="va">p</span><span class="op">[[</span><span class="st">"resources"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">list_of_ressources</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 31</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   cache_las…¹ cache…² created datas…³ descr…⁴ file_…⁵ format hash  id    kobo_…⁶</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>      2022-0… FALSE   <span style="color: #949494;">"</span>Quest… questi… XLS    <span style="color: #949494;">""</span>    2c6a… aQTbMZ…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>      2022-0… FALSE   <span style="color: #949494;">"</span>CSV d… microd… CSV    <span style="color: #949494;">""</span>    491c… aQTbMZ…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>      2022-0… FALSE   <span style="color: #949494;">"</span>XLS d… microd… XLS    <span style="color: #949494;">""</span>    92ae… aQTbMZ…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>      2022-1… FALSE   <span style="color: #949494;">"</span>Data … microd… XLSX   <span style="color: #949494;">""</span>    21b3… <span style="color: #BB0000;">NA</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>      2022-1… FALSE   <span style="color: #949494;">""</span>      report  HTML   <span style="color: #949494;">""</span>    29d4… <span style="color: #BB0000;">NA</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 33 more variables: kobo_details$kobo_download_status &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   $kobo_download_attempts &lt;int&gt;, $kobo_last_updated &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   $kobo_export_id &lt;chr&gt;, $kobo_filter_fields_from_all_versions &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   $kobo_filter_group_sep &lt;chr&gt;, $kobo_filter_fields &lt;list&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   $kobo_filter_query &lt;lgl&gt;, $kobo_filter_multiple_select &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   $kobo_filter_hierarchy_in_labels &lt;lgl&gt;, $kobo_filter_language &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   $kobo_last_error_response &lt;chr&gt;, kobo_type &lt;chr&gt;, last_modified &lt;chr&gt;, …</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#-----</span></span></span>
<span class="r-in"><span><span class="co"># Test create in UAT</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>USE_UAT<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># p &lt;- riddle::dataset_show('testedouard2')</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### TO FIX -- geographies: Missing value</span></span></span>
<span class="r-in"><span><span class="co">## __type: Validation Error ---</span></span></span>
<span class="r-in"><span><span class="co">## cf https://github.com/okfn/ckanext-unhcr/blob/master/ckanext/unhcr/schemas/dataset.json#L670:L682</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">riddle</span><span class="fu">::</span><span class="fu"><a href="dataset_metadata.html">dataset_metadata</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Motor Trend Car Road Test two"</span>,</span></span>
<span class="r-in"><span>                      name <span class="op">=</span> <span class="st">"mtcars_ed"</span>,</span></span>
<span class="r-in"><span>                      notes <span class="op">=</span> <span class="st">"The data was extracted from the 1974 Motor Trend</span></span></span>
<span class="r-in"><span><span class="st">                      US magazine, and comprises fuel consumption and 10 aspects</span></span></span>
<span class="r-in"><span><span class="st">                      of automobile design and performance for 32 automobiles</span></span></span>
<span class="r-in"><span><span class="st">                      (1973–74 models)."</span>,</span></span>
<span class="r-in"><span>                      owner_org <span class="op">=</span> <span class="st">"Americas"</span>,</span></span>
<span class="r-in"><span>                      visibility <span class="op">=</span> <span class="st">"public"</span>,</span></span>
<span class="r-in"><span>                      geographies <span class="op">=</span> <span class="st">"UNSPECIFIED"</span>,</span></span>
<span class="r-in"><span>                      external_access_level <span class="op">=</span> <span class="st">"open_access"</span>,</span></span>
<span class="r-in"><span>                      data_collector <span class="op">=</span> <span class="st">"Motor Trend"</span>,</span></span>
<span class="r-in"><span>                      keywords <span class="op">=</span> <span class="va">keywords</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Environment"</span>, <span class="st">"Other"</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                      unit_of_measurement <span class="op">=</span> <span class="st">"car"</span>,</span></span>
<span class="r-in"><span>                      data_collection_technique <span class="op">=</span> <span class="st">"oth"</span>,</span></span>
<span class="r-in"><span>                      archived <span class="op">=</span> <span class="st">"False"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># ## For the above to work - you need to make sure you have at least editor access</span></span></span>
<span class="r-in"><span><span class="co"># to the corresponding container - i.e. owner_org = "exercise-container"</span></span></span>
<span class="r-in"><span><span class="co">#p &lt;- riddle::dataset_create(metadata = m)</span></span></span>
<span class="r-in"><span><span class="co"># The return value is a representation of the dataset we just created in</span></span></span>
<span class="r-in"><span><span class="co"># RIDL that you could inspect like any other R object.</span></span></span>
<span class="r-in"><span><span class="co">#p</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#-----</span></span></span>
<span class="r-in"><span><span class="co"># Test create in prod</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.unsetenv</a></span><span class="op">(</span><span class="st">"USE_UAT"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># m1 &lt;- riddle::dataset_metadata(title = "Test",</span></span></span>
<span class="r-in"><span><span class="co">#                       name = "Test",</span></span></span>
<span class="r-in"><span><span class="co">#                       notes = "The data was extracted from kobo.",</span></span></span>
<span class="r-in"><span><span class="co">#                       owner_org = "Americas : Regional Datasets",</span></span></span>
<span class="r-in"><span><span class="co">#                       visibility = "public",</span></span></span>
<span class="r-in"><span><span class="co">#                       geographies = "UNSPECIFIED",</span></span></span>
<span class="r-in"><span><span class="co">#                       external_access_level = "open_access",</span></span></span>
<span class="r-in"><span><span class="co">#                       data_collector = "UNHCR",</span></span></span>
<span class="r-in"><span><span class="co">#                       keywords = keywords[c("Environment", "Other")],</span></span></span>
<span class="r-in"><span><span class="co">#                       unit_of_measurement = "car",</span></span></span>
<span class="r-in"><span><span class="co">#                       data_collection_technique = "oth",</span></span></span>
<span class="r-in"><span><span class="co">#                       archived = "False")</span></span></span>
<span class="r-in"><span><span class="co"># p &lt;- riddle::dataset_create(metadata = m1)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Hisham Galal, Edouard Legoupil.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

