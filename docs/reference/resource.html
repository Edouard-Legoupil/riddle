<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Work with RIDL resources (files)"><title>Work with RIDL resources (files) — resource • riddle</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Lato-0.4.4/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.4/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Work with RIDL resources (files) — resource"><meta property="og:description" content="Work with RIDL resources (files)"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">riddle</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/package-functions.html">Package Functions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/edouard-legoupil/riddle/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Work with RIDL resources (files)</h1>
      <small class="dont-index">Source: <a href="https://github.com/edouard-legoupil/riddle/blob/HEAD/R/resource.R" class="external-link"><code>R/resource.R</code></a>, <a href="https://github.com/edouard-legoupil/riddle/blob/HEAD/R/search.R" class="external-link"><code>R/search.R</code></a></small>
      <div class="d-none name"><code>resource.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Work with RIDL resources (files)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">resource_create</span><span class="op">(</span><span class="va">pkgid</span>, <span class="va">res_metadata</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resource_update</span><span class="op">(</span><span class="va">id</span>, <span class="va">res_metadata</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resource_patch</span><span class="op">(</span><span class="va">id</span>, <span class="va">res_metadata</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resource_delete</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resource_create</span><span class="op">(</span><span class="va">pkgid</span>, <span class="va">res_metadata</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resource_update</span><span class="op">(</span><span class="va">id</span>, <span class="va">res_metadata</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resource_patch</span><span class="op">(</span><span class="va">id</span>, <span class="va">res_metadata</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resource_delete</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>res_metadata</dt>
<dd><p>Metadata created by <code><a href="resource_metadata.html">resource_metadata()</a></code>.</p></dd>


<dt>id</dt>
<dd><p>The id or name of the resource.</p></dd>


<dt>dataset_id</dt>
<dd><p>The id or name of the dataset to which this resource belongs to.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The resource.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>You must have the necessary permissions to create, edit, or delete
datasets and their resources.</p>
<p>Note that several fields are required for <code>resource_create()</code> and
<code>resource_update()</code> operations to succeed.
Consult <code><a href="resource_metadata.html">resource_metadata()</a></code> for the details.</p>
<p>For <code>resource_update()</code>/<code>resource_patch()</code> operations, it is recommended to
call <code>resource_show()</code>, make the desired changes to the result, and then
call <code>resource_update()</code>/<code>resource_patch()</code> with it.</p>
<p>The difference between the update and patch methods is that the patch will
perform an update of the provided parameters, while leaving all other
parameters unchanged, whereas the update methods deletes all parameters
not explicitly provided in the <code>metadata</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## let's get again the details of the dataset we want to add the resource in..</span></span></span>
<span class="r-in"><span><span class="co">#-----</span></span></span>
<span class="r-in"><span><span class="co"># Test search in prod</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.unsetenv</a></span><span class="op">(</span><span class="st">"USE_UAT"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">riddle</span><span class="fu">::</span><span class="fu"><a href="search.html">dataset_search</a></span><span class="op">(</span><span class="st">"rms_v4"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 10 × 54</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    admin_notes    archi…¹ author autho…² clean…³ creat…⁴ data_…⁵ data_…⁶ data_…⁷</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> <span style="color: #949494;">"</span>The RMS surv… False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">""</span>      5cdbcb… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>      tri    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> <span style="color: #949494;">"</span>R4V - RMRP B… True    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">""</span>      3b109e… <span style="color: #949494;">"</span>Restr… <span style="color: #949494;">"</span>Tool:… cawi   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> <span style="color: #949494;">""</span>             False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">""</span>      183804… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>      tri    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> <span style="color: #949494;">"</span>Uploaded dat… False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">"</span>Uploa… 10a321… <span style="color: #949494;">"</span>Data … <span style="color: #949494;">"</span>Data … cami   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> <span style="color: #949494;">""</span>             False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">""</span>      de99be… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>      tri    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> <span style="color: #949494;">""</span>             True    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">""</span>      1b633b… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>      tri    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>  <span style="color: #BB0000;">NA</span>            False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>     b5d85f…  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     tri    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>  <span style="color: #BB0000;">NA</span>            False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>     b5d85f…  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     tri    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> <span style="color: #949494;">""</span>             False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">""</span>      e44763… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>      f2f    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> <span style="color: #949494;">""</span>             False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">""</span>      9a1c9d… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>      capi   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 45 more variables: data_collector &lt;chr&gt;, data_sensitivity &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   date_range_end &lt;chr&gt;, date_range_start &lt;chr&gt;, external_access_level &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   geog_coverage &lt;chr&gt;, geographies &lt;list&gt;, id &lt;chr&gt;, identifiability &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   isopen &lt;lgl&gt;, keywords &lt;list&gt;, kobo_asset_id &lt;chr&gt;, license_id &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   license_title &lt;lgl&gt;, maintainer &lt;lgl&gt;, maintainer_email &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   metadata_created &lt;chr&gt;, metadata_modified &lt;chr&gt;, name &lt;chr&gt;, notes &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   num_resources &lt;int&gt;, num_tags &lt;int&gt;, operational_purpose_of_data &lt;list&gt;, …</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#-----</span></span></span>
<span class="r-in"><span><span class="co"># Test search in uat</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>USE_UAT<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">riddle</span><span class="fu">::</span><span class="fu"><a href="search.html">dataset_search</a></span><span class="op">(</span><span class="st">"tests"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 10 × 54</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    admin_notes    archi…¹ author autho…² clean…³ creat…⁴ data_…⁵ data_…⁶ data_…⁷</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> <span style="color: #949494;">""</span>             False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">""</span>      daf9d9… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>      nf     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> <span style="color: #949494;">""</span>             True    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">""</span>      1b633b… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>      tri    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> <span style="color: #949494;">""</span>             False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">""</span>      9a7869… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>      tri    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> <span style="color: #949494;">""</span>             False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">""</span>      a87b60… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>      f2f    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> <span style="color: #949494;">""</span>             False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">""</span>      f1b4d3… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>      tri    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> <span style="color: #949494;">"</span>The dataset … False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">"</span>For p… 274891… <span style="color: #949494;">""</span>      <span style="color: #949494;">"</span>The m… capi   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> <span style="color: #949494;">""</span>             False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">""</span>      aaf6de… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>      tri    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> <span style="color: #949494;">""</span>             True    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">"</span>The i… cf0c93… <span style="color: #949494;">"</span>The K… <span style="color: #949494;">"</span>Eleve… tri    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> <span style="color: #949494;">""</span>             True    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">"</span>The i… cf0c93… <span style="color: #949494;">"</span>The K… <span style="color: #949494;">"</span>Six U… tri    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> <span style="color: #949494;">""</span>             False   <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #949494;">""</span>      f1b4d3… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>      f2f    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 45 more variables: data_collector &lt;chr&gt;, data_sensitivity &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   date_range_end &lt;chr&gt;, date_range_start &lt;chr&gt;, external_access_level &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   geog_coverage &lt;chr&gt;, geographies &lt;list&gt;, id &lt;chr&gt;, identifiability &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   isopen &lt;lgl&gt;, keywords &lt;list&gt;, kobo_asset_id &lt;chr&gt;, license_id &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   license_title &lt;lgl&gt;, maintainer &lt;lgl&gt;, maintainer_email &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   metadata_created &lt;chr&gt;, metadata_modified &lt;chr&gt;, name &lt;chr&gt;, notes &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   num_resources &lt;int&gt;, num_tags &lt;int&gt;, operational_purpose_of_data &lt;list&gt;, …</span></span>
<span class="r-in"><span><span class="co">##take the first one</span></span></span>
<span class="r-in"><span><span class="va">ridlid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">p</span><span class="op">[</span><span class="fl">9</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## let's get again the details of the dataset we want to add the resource in..</span></span></span>
<span class="r-in"><span><span class="co">#r &lt;- riddle::resource_create(dataset_id = ridlid, res_metadata = m)</span></span></span>
<span class="r-in"><span><span class="co"># Like before, the return value is a tibble representation of the resource.</span></span></span>
<span class="r-in"><span><span class="co">#r</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="co">## and now can search for it - checking it is correctly there... </span></span></span>
<span class="r-in"><span><span class="co">##riddle::resource_search("name:mtcarsriddle")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># And once we’re done experimenting with the API, we should take down our</span></span></span>
<span class="r-in"><span><span class="co"># toy dataset since we don’t really need it on RIDL.</span></span></span>
<span class="r-in"><span><span class="co">#riddle::dataset_delete(p$id)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#-----</span></span></span>
<span class="r-in"><span><span class="co"># Test search in prod</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.unsetenv</a></span><span class="op">(</span><span class="st">"USE_UAT"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">riddle</span><span class="fu">::</span><span class="fu"><a href="dataset.html">dataset_show</a></span><span class="op">(</span><span class="st">'rms_v4'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dataset_id_rms</span> <span class="op">&lt;-</span> <span class="va">p</span><span class="op">$</span><span class="va">id</span></span></span>
<span class="r-in"><span><span class="va">list_of_ressources</span> <span class="op">&lt;-</span> <span class="va">p</span><span class="op">[[</span><span class="st">"resources"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">list_of_ressources</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>provided 13 variables to replace 1 variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |cache_last_updated |cache_url |created                    |datastore_active |description                                                            |file_type     |format |hash |id                                   |kobo_details           |kobo_type     |last_modified              |metadata_modified          |mimetype                                                          |mimetype_inner |name                       |package_id                           | position|resource_type |     size|state  |type       |url                                                                                                                                                                         |url_type |visibility |date_range_end |date_range_start |identifiability         |process_status |version |original_url |</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:------------------|:---------|:--------------------------|:----------------|:----------------------------------------------------------------------|:-------------|:------|:----|:------------------------------------|:----------------------|:-------------|:--------------------------|:--------------------------|:-----------------------------------------------------------------|:--------------|:--------------------------|:------------------------------------|--------:|:-------------|--------:|:------|:----------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:--------|:----------|:--------------|:----------------|:-----------------------|:--------------|:-------|:------------|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |NA                 |NA        |2022-08-31T22:49:51.777678 |FALSE            |Questionnaire imported from the KoBo survey                            |questionnaire |XLS    |     |2c6a805f-77d4-4b3d-9873-5480d9943472 |aQTbMZSPH4vwMJTtk4xjHT |questionnaire |2022-08-31T22:50:07.684601 |2022-08-31T22:50:08.260981 |application/x-empty                                               |NA             |Questionnaire XLS          |8c7eb4c1-b40e-4fc5-abae-896655f64cb2 |        0|NA            |        0|active |attachment |https://ridl.unhcr.org/dataset/8c7eb4c1-b40e-4fc5-abae-896655f64cb2/resource/2c6a805f-77d4-4b3d-9873-5480d9943472/download/aqtbmzsph4vwmjttk4xjht.xls                       |upload   |public     |NA             |NA               |NA                      |NA             |NA      |NA           |</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |NA                 |NA        |2022-08-31T22:49:55.450262 |FALSE            |CSV data imported from the KoBoToolbox survey.                         |microdata     |CSV    |     |491c3718-a4e6-40c8-8289-90199e5457cb |aQTbMZSPH4vwMJTtk4xjHT |data          |2022-08-31T22:50:20.090377 |2022-08-31T22:50:20.447250 |application/x-empty                                               |NA             |Survey csv data            |8c7eb4c1-b40e-4fc5-abae-896655f64cb2 |        1|NA            |        0|active |data       |https://ridl.unhcr.org/dataset/8c7eb4c1-b40e-4fc5-abae-896655f64cb2/resource/491c3718-a4e6-40c8-8289-90199e5457cb/download/survey-csv-data__aqtbmzsph4vwmjttk4xjht_data.csv |upload   |restricted |2022-07-30     |2022-07-11       |personally_identifiable |raw            |1       |NA           |</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |NA                 |NA        |2022-08-31T22:49:57.089230 |FALSE            |XLS data imported from the KoBoToolbox survey.                         |microdata     |XLS    |     |92ae1611-149c-4e4a-b83a-eaeb25942309 |aQTbMZSPH4vwMJTtk4xjHT |data          |2022-08-31T22:50:33.070115 |2022-12-08T15:55:38.370890 |application/x-empty                                               |NA             |Survey xls data            |8c7eb4c1-b40e-4fc5-abae-896655f64cb2 |        2|NA            |        0|active |data       |https://ridl.unhcr.org/dataset/8c7eb4c1-b40e-4fc5-abae-896655f64cb2/resource/92ae1611-149c-4e4a-b83a-eaeb25942309/download/survey-xls-data__aqtbmzsph4vwmjttk4xjht_data.xls |upload   |restricted |2022-07-30     |2022-07-11       |personally_identifiable |raw            |1       |NA           |</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |NA                 |NA        |2022-10-03T14:32:11.734505 |FALSE            |Data from Kobo in XML format with values and headers.  3 October 2022. |microdata     |XLSX   |     |21b3ce9f-5653-4819-a6ac-df19283691d1 |NA                     |              |2022-10-03T14:32:11.536587 |2022-10-03T14:32:18.063693 |application/vnd.openxmlformats-officedocument.spreadsheetml.sheet |NA             |RMS XML values and headers |8c7eb4c1-b40e-4fc5-abae-896655f64cb2 |        3|NA            |  1967301|active |data       |https://ridl.unhcr.org/dataset/8c7eb4c1-b40e-4fc5-abae-896655f64cb2/resource/21b3ce9f-5653-4819-a6ac-df19283691d1/download/rms_v4_xml_values_and_headers.xlsx               |upload   |restricted |2022-07-30     |2022-07-11       |personally_identifiable |raw            |1       |             |</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |NA                 |NA        |2022-10-04T13:59:30.533323 |FALSE            |                                                                       |report        |HTML   |     |29d4bdba-b599-4e9e-8f17-eadbe6fadcc1 |NA                     |              |2022-10-04T13:59:30.321887 |2022-10-04T13:59:36.012003 |text/html                                                         |NA             |Crunching report           |8c7eb4c1-b40e-4fc5-abae-896655f64cb2 |        4|NA            | 56601325|active |attachment |https://ridl.unhcr.org/dataset/8c7eb4c1-b40e-4fc5-abae-896655f64cb2/resource/29d4bdba-b599-4e9e-8f17-eadbe6fadcc1/download/exploration.html                                 |upload   |public     |NA             |NA               |NA                      |NA             |NA      |             |</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">new_attachment</span> <span class="op">&lt;-</span> <span class="fu">riddle</span><span class="fu">::</span><span class="fu"><a href="resource_metadata.html">resource_metadata</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"attachment"</span>,</span></span>
<span class="r-in"><span>                       url <span class="op">=</span> <span class="st">"resource.R"</span>, </span></span>
<span class="r-in"><span><span class="co"># upload = httr::upload_file(here::here("R","resource.R") ),</span></span></span>
<span class="r-in"><span><span class="co">## # Error:</span></span></span>
<span class="r-in"><span><span class="co"># ! All columns in a tibble must be vectors.</span></span></span>
<span class="r-in"><span><span class="co"># ✖ Column `upload` is a `form_file` object.</span></span></span>
<span class="r-in"><span>                       name <span class="op">=</span> <span class="st">"Rscript"</span>,</span></span>
<span class="r-in"><span>                       format <span class="op">=</span> <span class="st">"R"</span>,</span></span>
<span class="r-in"><span>                       file_type <span class="op">=</span> <span class="st">"report"</span>,</span></span>
<span class="r-in"><span>                       version <span class="op">=</span> <span class="st">"1"</span>,</span></span>
<span class="r-in"><span>                       visibility <span class="op">=</span> <span class="st">"public"</span> <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Now testing adding the file "resource.R" as an attachment in the </span></span></span>
<span class="r-in"><span><span class="co">## dataset 'rms_v4'</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># but not working.... </span></span></span>
<span class="r-in"><span><span class="co"># resource_create(dataset_id = dataset_id_rms, </span></span></span>
<span class="r-in"><span><span class="co">#                         res_metadata = new_attachment )</span></span></span>
<span class="r-in"><span><span class="co"># Error in ridl(action = "resource_create", dataset_id = dataset_id, !!!res_metadata, : </span></span></span>
<span class="r-in"><span><span class="co"># __type: Not Found Error</span></span></span>
<span class="r-in"><span><span class="co"># message: Not found: No dataset id provided, cannot check auth.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">riddle</span><span class="fu">::</span><span class="fu"><a href="resource_metadata.html">resource_metadata</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"data"</span>,</span></span>
<span class="r-in"><span>                       url <span class="op">=</span> <span class="st">"mtcars.csv"</span>,</span></span>
<span class="r-in"><span><span class="co">#  upload = httr::upload_file(system.file("extdata/mtcars.csv", package = "readr")),         </span></span></span>
<span class="r-in"><span><span class="co">## # Error:</span></span></span>
<span class="r-in"><span><span class="co"># ! All columns in a tibble must be vectors.</span></span></span>
<span class="r-in"><span><span class="co"># ✖ Column `upload` is a `form_file` object.</span></span></span>
<span class="r-in"><span>                       name <span class="op">=</span> <span class="st">"mtcars.csv"</span>,</span></span>
<span class="r-in"><span>                       format <span class="op">=</span> <span class="st">"csv"</span>,</span></span>
<span class="r-in"><span>                       file_type <span class="op">=</span> <span class="st">"microdata"</span>,</span></span>
<span class="r-in"><span>                       date_range_start <span class="op">=</span> <span class="st">"1973-01-01"</span>,</span></span>
<span class="r-in"><span>                       date_range_end <span class="op">=</span> <span class="st">"1973-12-31"</span>,</span></span>
<span class="r-in"><span>                       version <span class="op">=</span> <span class="st">"1"</span>,</span></span>
<span class="r-in"><span>                       visibility <span class="op">=</span> <span class="st">"public"</span>,</span></span>
<span class="r-in"><span>                       process_status <span class="op">=</span> <span class="st">"raw"</span>,</span></span>
<span class="r-in"><span>                       identifiability <span class="op">=</span> <span class="st">"anonymized_public"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># same pb... </span></span></span>
<span class="r-in"><span><span class="co"># resource_create(dataset_id = dataset_id_rms, </span></span></span>
<span class="r-in"><span><span class="co">#                          res_metadata = m )</span></span></span>
<span class="r-in"><span><span class="co"># Error in ridl(action = "resource_create", dataset_id = dataset_id, !!!res_metadata, : </span></span></span>
<span class="r-in"><span><span class="co"># __type: Not Found Error</span></span></span>
<span class="r-in"><span><span class="co"># message: Not found: No dataset id provided, cannot check auth.</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Hisham Galal, Edouard Legoupil.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

